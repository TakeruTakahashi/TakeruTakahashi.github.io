<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/blood.css" id="theme">
		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
	</head>
	<body>
		<div class="reveal">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-markdown>
					## NHS Talks #2
					### 書籍紹介「ソフトウェア見積り」
					
					 Takahashi, Takeru
				</section>
				<!--<section>
					<h2>こんなことおきてませんか</h2>
					<p>
						<img width=60% data-src="antiPatternForFileName.png">
					</p>
					<h3>しかもExcel</h3>
					<h4>差分わからん マージも大変</h4>
				</section>-->
				<section data-markdown data-separator="^\n---$" data-vertical="^\n>>>$">
					<script type="text/template">
						#### ソフトウェア見積り - 人月の暗黙知を解き明かす
						- 原題: Software Estimation: Demystifying the Black Art 
						- 著書: Steve McConnell
						 - 「Code Complete」の著者
						 - Microsoft, Boeing でシステム開発に従事

						<img width=30% data-src="img/ソフトウェア見積り.jpg">
						
						---
						## おことわり
						- 前半1/3をまとめました
						- 「当たり前だろ！」と思われたらすみません
						
						---
						## 見積りとは
						- 辞書によると
						 - 暫定的な評価または粗い算定
						 - プロジェクト費用の予備的な算定
						 - 印象に基づく判断、意見
						
						---
						## 経営幹部とPJ責任者の会話
						- 経営幹部: このプロジェクトの期間を教えてほしい。展示会に間に合わせるための開発期間は3ヶ月だ。ただしチームメンバーは補充できない。
						- PJ責任者: 検討します。
						- ...
						- PJ責任者: 見積もったところ、プロジェクトに要する期間は5ヶ月となりました。
						- 経営幹部: ふざけんな！
						
						---
						## 見積りとターゲットと計画
						- 何が悪かったのか？
						- 経営幹部が求めていたのは「見積り」ではなく「ターゲットを達成するための計画」だった
						
						---
						## より建設的な会話
						<font size=6>
						<ul>
						<li> 経営幹部: このプロジェクトの期間を教えてほしい。展示会に間に合わせるための開発期間は3ヶ月だ。ただしチームメンバーは補充できない。
						<li> PJ責任者: 機能を100%網羅することと、何らかの成果物を展示会に間に合わせることでは、どちらが重要ですか。
						<li> 経営幹部: とにかく展示会に間に合わせる必要がある。だが可能であれば機能を100%盛り込みたい。
						<li> PJ責任者: 仮に100%の機能を完成出来ないとわかったら、展示会ではできた範囲で発表しますか。それとも、発表をずらしますか。
						<li> 経営幹部: 展示会には何かしら出展する必要がある。やむを得ない場合は、100%でなくても出すつもりだ。
						<li> PJ責任者: 承知しました。この3ヶ月で出来る限り多くの機能を盛り込んで納品することを念頭に、計画を作成します。
						</ul>
						</font>

						---
						## ポイント
						- 見積りを求められた時は、実際に見積りを行うのか、ターゲットの達成方法をたずねられているのかを判断すること。
						
						---
						## シングルポイントな見積り
						- 「このプロジェクトの所要期間は10人月です。」
						 - システム開発の不確実性が表現されない
						 - むしろ、これは「見積り」ではなく「ターゲット」では？

						<img width=70% data-src="img/シングルポイントの見積り.png">
						
						---
						## 見積りは確率分布

						<img width=80% data-src="img/見積りの分布.png">

						---
						## ここでクイズ
						- 以下の数値を、90%正解するであろう「範囲」で考えてください。範囲は広すぎても狭すぎてもいけません。
						 1. アレキサンダー大王の生年
						 2. 映画「タイタニック」の全世界での興行収入(円)
						 3. 地球の海岸線の長さ
						 4. シロナガスクジラの最重記録
						 5. 琵琶湖の水量
						
						---
						## 正解
						- 以下の数値を、90%正解するであろう「範囲」で考えてください。
						 1. アレキサンダー大王の生年: 紀元前336年
						 2. 映画「タイタニック」の全世界での興行収入: 3200億円
						 3. 地球の海岸線の長さ: 36万km
						 4. シロナガスクジラの最重記録: 190t
						 5. 琵琶湖の水量: 27.5兆l
						
						---
						## 高橋の回答
						 1. ○ B.C.1000-A.C.1000
						 2. ○ 100億円 - 10兆円
						 3. × 1億km - 1兆km
						 4. × 1t - 100t
						 5. × 100億l - 1兆l
						
						---
						### このクイズから何が言えるか
						- 統計的裏付けの無い「90%確か」には意味が無い

						<img width=80% data-src="img/見積り能力のチェック.png">

						---
						## 適正な見積りの幅は
						- 見積りは幅が狭いほうが正確だと信じがち
						 - でも「正確さ」だと広い方がいいはず
						- 見積りを狭める謎のプレッシャーに打ち勝つ

						---
						##見積りが過大・過小になってもいいの？
						
						---
						## 過大な見積り
						- パーキンソンの法則
						 - 仕事の量は、完成のために与えられた時間をすべて満たすまで膨張する
						 - 4日で終わる作業に5日与えたら最後の1日もいろいろ作業しちゃう
						- 学生症候群
						 - 夏休みの宿題は夏休みの終盤に片付ける
						 - この場合、大体終わらない
						
						---
						## 過小な見積り
						- 開発者の見積りは20～30%程度楽観的になる
						- 遅延が発生するとアクティビティが増える
						 - 経営陣との打ち合わせ
						 - 顧客への説明
						 - 展示会向けの暫定リリース版の用意
						 - 機能絞り込みの議論
						
						---
						## 比較
						- 過大見積りの不利益は線形
						- 過小見積りの不利益は指数関数的！

						<img width=80% data-src="img/過大見積りと過小見積り.png">

						
						---
						### Standish グループのレポート
						<img width=75% data-src="img/失敗プロジェクトの比率.png">

						- 「早く終わったプロジェクト」はカテゴリすら無い

						
						---
						## 見積り誤差に立ち向かう
						- Big Dig ハイウェイ
						 - 26億ドル → 150億ドル
						- アイルランドの人事給与システム
						 - 880万ユーロ → 1億4000万ユーロ
						 - 結局取り止め
						
						---
						## 見積りの不確実性
						- ソフトウェア開発は意思決定の連続
						 - 段階的な詳細化
						 - 企画, 要件定義, 設計, ...
						- 不確実性は変化する
						
						---
						## 不確実性のコーン

						<img width=70% data-src="img/不確実性のコーン.png">

						- プロジェクトの進行に従って不確実性が収束していく
						- 見積りは都度見直す必要がある
						
						---
						### 不確実性のコーンは勝手に収束しない
						
						<img width=70% data-src="img/不確実性のコーン2.png">

						- 広くなることもある
						- 「不確実性を減らす」試みが必要
						
						---
						## 根拠の無い楽観主義
						- よくある(らしい)例
						 - 前のプロジェクトよりも今回の方が生産性が高いだろう
						 - 前のプロジェクトでは上手くいかないことが色々あったが、今回はそれほど失敗しないだろう
						 - これまでのプロジェクトの経験を活かせば、効率よくプロジェクトを進められるだろう
						- 経営陣は楽観的な見積りを好む
						 - 見えないプレッシャー
						
						---
						### 即興の見積りはしない！

						<img width=60% data-src="img/即興の見積り.png">

						- 平均相対誤差
						 - 即興の見積り: 67%
						 - レビュー済み: 30%
						
						---
						## 「勘と経験」の危険性
						- 個人の記憶に残り易いのは「実績」よりも、初期に作成した「見積り」
						 - 実績が見積りを超過していたら・・・？
						
						---
						## 規模の不経済

						<img width=60% data-src="img/規模の不経済.png">

						- 人が増えれば増えるほどコミュニケーションのコストが上がる
						
						---
						## 規模と工数
						
						<img width=60% data-src="img/規模と工数.png">

						- 当然、工数も線形ではない
						
						---
						# ここから
						# 具体的な話
						
						---
						### レセプション参加人数を見積もろう
						- ビル「僕の経験からみると、335人くらいだね。」
						- カール「テーブルが11×7並んでいる。１テーブルに約5人ずつ座っているから、385人程度だろう。」
						- ルーシー「会場の定員が485人と書いていたわ。会場の混み具合から70～80%程度とすると、340～388人。間をとって365人ね。」
						- 3人「間をとって365人としよう。」
						- あなた「この会場には、チケットをスキャンして入場していましたね。スキャナーのカウンターを見てきたら、407と表示されていました。今のところ誰も会場を出ていないそうです。この407が見積りの数値として適切だと思います。」
						
						---
						## 数える
						- どの見積りが最も確からしいだろう？
						 - 「判断」に頼ったビル
						 - 「数えて」「計算」したカール
						 - 「計算」して「判断」したルーシー
						 - 「数えた」あなた
						- まず数える。数えられない場合は計算する。判断はできるだけ除外する。
						
						---
						## 何を数えよう？
						- 初期
						 - 要求, 機能, ユースケース, ストーリー,...
						- 中期
						 - ファンクションポイント, 画面, 帳票, テーブル,...
						- 後期
						 - LOC, バグ, クラス, タスク,...
						- 適したものはプロジェクトによって異なる
						- 数える労力は少ないものを選ぶ
						
						---
						## 数えたものは蓄積する	
						- それぞれの値と、要した工数の関係を蓄積する
						- そのプロジェクトの中で見積り精度を向上
						- 次回のプロジェクトで利用
						- データがなかったら業界一般のデータを利用
						
						---
						## 筆者の場合
						- 「Code Complete」(全900ページ)のレビュー
						 - 初回は1ページあたり3分かかった
						 - 筆者「次回以降はスピードアップするだろ。1ページあたり2～2.5分で計画立てよう」
						 - レビュー完了時の平均レビュー時間: 3分/ページ
						
						---
						## 工数の収集時の注意点
						- 1日は何時間か
						- 残業を含むか
						- 休日、休暇、研修を含むか
						- 複数プロジェクトにまたがる場合どうするか
						- 展示会のサポート
						- ...
						
						---
						## PERT法
						- 3点による見積り
						 - 期待ケース = (最良 + 4×最有力 + 最悪) / 6
						- 「下向きに補正すべき」との意見も
						 - 期待ケース = (最良 + 3×最有力 + 2×最悪) / 6
						- 「最悪ケースを想定する」というだけでも価値がある！
						
						---
						## 見積りと実績の対比
						- フィードバックループをつくろう
						- MRE = |(実際の結果 - 見積り結果) / 実際の結果|
						- MRE向上→見積り能力向上
						
						---
						## 細分化しよう
						- 大数の法則
						 - 試行を繰り返し行うと、確率が理論値に近づく
						- 見積りを細分化すると個別の誤差が相殺し合う
						- ただし楽観性が増幅されないように注意
						
						---
						## レビュー
						- 筆者の提案するグループレビュー
						 - 各チームメンバーが個別に見積もる
						 - ミーティングで比較する
						 - 意見を出し合って合意する
						
						---
						### グループレビューによる改善
						
						<img width=70% data-src="img/グループレビュー.png">

						---
						## 広域デルファイ法
						- コーディネータを決める
						- コーディネータがミーティングを開催する
						 - あっさりと合意に達した場合、コーディネータは1人を指名し、反対の立場に立ってもらう
						- 見積もり作成者たちは個別に見積もる
						- 見積もり作成者たちは、自分の見積もりを無記名で提出する
						- コーディネータは各見積もりの差を議論してもらう
						- 各見積もりの平均を受け入れるかどうか、見積もり作成者は無記名で投票する。1人でも「ノー」がいたらミーティングからやり直し
						
						---
						### 広域デルファイ法による改善

						<img width=70% data-src="img/広域デルファイ法.png">
						
						---
						## 広域デルファイ法の効能

						<img width=80% data-src="img/真実は外側に.png">

						- 初期の見積もりよりも外側に落ち着くことも多い
						- はじめに見えなかったことが見えてくる
						
						---
						## ツールもあります
						- Angel
						- Construx Estimate (筆者が開発)
						- COCOMO Ⅱ
						- Costar
						- KnowledgePLAN
						- ... 
						
						---
						## まとめ
						- 見積もりは確率分布
						- 見積りは変わる
						- 「90%の確率で合ってる」はアテにならない
						- 過小見積もりより過大見積もりのほうが良い(ことが多い)
						- 数えよう
						- データを残そう
						- レビューしよう
					
					</script>
				</section>
			</div>
		</div>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<script>
			// Full list of configuration options available at:
			        // https://github.com/hakimel/reveal.js#configuration
			        Reveal.initialize({
			          controls: true,
			          progress: true,
			          history: true,
			          center: true,
			
			          transition: 'slide', // none/fade/slide/convex/concave/zoom
			
			          // Optional reveal.js plugins
			          dependencies: [
			            { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
			            { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
			            { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
			            { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
			            { src: 'plugin/zoom-js/zoom.js', async: true },
			            { src: 'plugin/notes/notes.js', async: true }
			          ]
			        });
		</script>
	</body>

</html>